    Checking tdb-core v1.0.0 (/Users/AbiolaOgunsakin1/tdb+ fork/tdb-fork/rust-core)
error[E0433]: failed to resolve: use of undeclared type `Database`
   --> src/ffi/mod.rs:123:36
    |
123 |     let engine = match rt.block_on(Database::open(config)) {
    |                                    ^^^^^^^^ use of undeclared type `Database`
    |
help: consider importing one of these structs
    |
  9 + use crate::Database;
    |
  9 + use crate::node_bindings::Database;
    |

error[E0603]: module `engine` is private
  --> src/ffi/mod.rs:13:21
   |
13 | use crate::storage::engine::StorageEngine;
   |                     ^^^^^^ private module
   |
note: the module `engine` is defined here
  --> src/storage/mod.rs:8:1
   |
 8 | mod engine;
   | ^^^^^^^^^^^

warning: unused import: `Compression`
  --> src/storage/engine.rs:16:56
   |
16 | use crate::types::{KeyValue, KeyRange, SequenceNumber, Compression};
   |                                                        ^^^^^^^^^^^
   |
   = note: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default

warning: unused import: `TdbError`
  --> src/storage/engine.rs:17:28
   |
17 | use crate::error::{Result, TdbError};
   |                            ^^^^^^^^

warning: unused imports: `BufReader`, `Read`, `SeekFrom`, and `Seek`
 --> src/storage/sstable.rs:4:15
  |
4 | use std::io::{BufReader, BufWriter, Read, Write, Seek, SeekFrom};
  |               ^^^^^^^^^             ^^^^         ^^^^  ^^^^^^^^

warning: unused import: `parking_lot::RwLock`
 --> src/storage/collection.rs:4:5
  |
4 | use parking_lot::RwLock;
  |     ^^^^^^^^^^^^^^^^^^^

warning: unused import: `TdbError`
 --> src/storage/collection.rs:8:28
  |
8 | use crate::error::{Result, TdbError};
  |                            ^^^^^^^^

warning: unused import: `BufRead`
 --> src/storage/manifest.rs:5:15
  |
5 | use std::io::{BufRead, BufReader, BufWriter, Write};
  |               ^^^^^^^

warning: unused import: `Ordering`
 --> src/wal/mod.rs:6:36
  |
6 | use std::sync::atomic::{AtomicU64, Ordering};
  |                                    ^^^^^^^^

warning: unused import: `std::os::unix::fs::OpenOptionsExt`
  --> src/hybrid/tier.rs:12:5
   |
12 | use std::os::unix::fs::OpenOptionsExt;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `AtomicUsize`
  --> src/hybrid/tier.rs:15:36
   |
15 | use std::sync::atomic::{AtomicU64, AtomicUsize, Ordering};
   |                                    ^^^^^^^^^^^

warning: unused import: `std::sync::Arc`
  --> src/hybrid/tier.rs:16:5
   |
16 | use std::sync::Arc;
   |     ^^^^^^^^^^^^^^

warning: unused import: `dashmap::DashMap`
  --> src/hybrid/tier.rs:18:5
   |
18 | use dashmap::DashMap;
   |     ^^^^^^^^^^^^^^^^

warning: unused import: `AtomicU32`
  --> src/hybrid/index.rs:11:25
   |
11 | use std::sync::atomic::{AtomicU32, AtomicU64, Ordering};
   |                         ^^^^^^^^^

warning: unused import: `dashmap::DashMap`
  --> src/hybrid/index.rs:14:5
   |
14 | use dashmap::DashMap;
   |     ^^^^^^^^^^^^^^^^

warning: unused import: `super::RecordLocation`
  --> src/hybrid/index.rs:16:5
   |
16 | use super::RecordLocation;
   |     ^^^^^^^^^^^^^^^^^^^^^

warning: unused imports: `AtomicU64` and `Ordering`
  --> src/hybrid/prefetch.rs:10:25
   |
10 | use std::sync::atomic::{AtomicU64, Ordering};
   |                         ^^^^^^^^^  ^^^^^^^^

warning: unused import: `std::collections::HashMap`
  --> src/hybrid/mod.rs:21:5
   |
21 | use std::collections::HashMap;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused imports: `Duration` and `Instant`
  --> src/hybrid/mod.rs:23:17
   |
23 | use std::time::{Duration, Instant};
   |                 ^^^^^^^^  ^^^^^^^

warning: unused imports: `Mutex` and `RwLock`
  --> src/hybrid/mod.rs:26:19
   |
26 | use parking_lot::{RwLock, Mutex};
   |                   ^^^^^^  ^^^^^

warning: unused import: `tokio::sync::mpsc`
  --> src/hybrid/mod.rs:27:5
   |
27 | use tokio::sync::mpsc;
   |     ^^^^^^^^^^^^^^^^^

warning: unused imports: `KeyValue` and `Value`
  --> src/hybrid/mod.rs:30:20
   |
30 | use crate::types::{KeyValue, Value};
   |                    ^^^^^^^^  ^^^^^

warning: unused import: `std::arch::aarch64::*`
  --> src/columnar/simd.rs:18:5
   |
18 | use std::arch::aarch64::*;
   |     ^^^^^^^^^^^^^^^^^^^^^

warning: unused imports: `Read` and `Write`
  --> src/columnar/compression.rs:11:15
   |
11 | use std::io::{Read, Write};
   |               ^^^^  ^^^^^

warning: unused import: `std::ops::Bound`
  --> src/columnar/timeseries.rs:10:5
   |
10 | use std::ops::Bound;
   |     ^^^^^^^^^^^^^^^

warning: unused import: `std::sync::Arc`
  --> src/columnar/timeseries.rs:11:5
   |
11 | use std::sync::Arc;
   |     ^^^^^^^^^^^^^^

warning: unused import: `parking_lot::RwLock`
  --> src/columnar/timeseries.rs:13:5
   |
13 | use parking_lot::RwLock;
   |     ^^^^^^^^^^^^^^^^^^^

warning: unused imports: `Result as TdbResult` and `TdbError`
  --> src/columnar/timeseries.rs:16:20
   |
16 | use crate::error::{TdbError, Result as TdbResult};
   |                    ^^^^^^^^  ^^^^^^^^^^^^^^^^^^^

warning: unused import: `std::sync::Arc`
  --> src/columnar/mod.rs:17:5
   |
17 | use std::sync::Arc;
   |     ^^^^^^^^^^^^^^

warning: unused import: `parking_lot::RwLock`
  --> src/columnar/mod.rs:19:5
   |
19 | use parking_lot::RwLock;
   |     ^^^^^^^^^^^^^^^^^^^

warning: unused imports: `IoSliceMut` and `IoSlice`
  --> src/io/uring.rs:13:21
   |
13 | use std::io::{self, IoSlice, IoSliceMut};
   |                     ^^^^^^^  ^^^^^^^^^^

warning: unused import: `AsRawFd`
  --> src/io/uring.rs:14:25
   |
14 | use std::os::unix::io::{AsRawFd, RawFd};
   |                         ^^^^^^^

warning: unused import: `std::sync::Arc`
  --> src/io/uring.rs:16:5
   |
16 | use std::sync::Arc;
   |     ^^^^^^^^^^^^^^

warning: unused import: `std::collections::VecDeque`
  --> src/latency/mod.rs:10:5
   |
10 | use std::collections::VecDeque;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused imports: `CString`, `c_int`, and `c_void`
 --> src/ffi/mod.rs:9:24
  |
9 | use std::ffi::{c_char, c_int, c_void, CStr, CString};
  |                        ^^^^^  ^^^^^^        ^^^^^^^

error[E0107]: enum takes 2 generic arguments but 1 generic argument was supplied
  --> src/scripting/mod.rs:29:80
   |
29 |     pub fn call_fn(&self, ast: &AST, name: &str, args: impl rhai::FuncArgs) -> Result<Dynamic> {
   |                                                                                ^^^^^^ ------- supplied 1 generic argument
   |                                                                                |
   |                                                                                expected 2 generic arguments
   |
help: add missing generic argument
   |
29 |     pub fn call_fn(&self, ast: &AST, name: &str, args: impl rhai::FuncArgs) -> Result<Dynamic, E> {
   |                                                                                              +++

error[E0204]: the trait `std::marker::Copy` cannot be implemented for this type
  --> src/columnar/mod.rs:24:24
   |
24 | #[derive(Debug, Clone, Copy, PartialEq, Eq)]
   |                        ^^^^
...
43 |     Vector(Box<ColumnType>), // Nested vector
   |            --------------- this field does not implement `std::marker::Copy`

error[E0107]: enum takes 2 generic arguments but 1 generic argument was supplied
  --> src/scripting/mod.rs:24:44
   |
24 |     pub fn compile(&self, script: &str) -> Result<AST> {
   |                                            ^^^^^^ --- supplied 1 generic argument
   |                                            |
   |                                            expected 2 generic arguments
   |
help: add missing generic argument
   |
24 |     pub fn compile(&self, script: &str) -> Result<AST, E> {
   |                                                      +++

warning: unused variable: `id`
   --> src/storage/collection.rs:154:39
    |
154 |     pub async fn replay_update(&self, id: &DocumentId, doc: Document) -> Result<()> {
    |                                       ^^ help: if this is intentional, prefix it with an underscore: `_id`
    |
    = note: `#[warn(unused_variables)]` (part of `#[warn(unused)]`) on by default

error[E0515]: cannot return value referencing function parameter `entry`
   --> src/memory/memtable.rs:109:38
    |
109 |         self.data.iter().map(|entry| (entry.key(), entry.value()))
    |                                      ^-----^^^^^^^^^^^^^^^^^^^^^^
    |                                      ||
    |                                      |`entry` is borrowed here
    |                                      returns a value referencing data owned by the current function

error[E0515]: cannot return value referencing function parameter `entry`
   --> src/memory/memtable.rs:109:38
    |
109 |         self.data.iter().map(|entry| (entry.key(), entry.value()))
    |                                      ^^^^^^^^^^^^^^-----^^^^^^^^^
    |                                      |             |
    |                                      |             `entry` is borrowed here
    |                                      returns a value referencing data owned by the current function

warning: unused variable: `hdd_store`
  --> src/hybrid/migration.rs:55:9
   |
55 |         hdd_store: Option<&HddStore>,
   |         ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_hdd_store`

warning: unused variable: `config`
  --> src/hybrid/migration.rs:56:9
   |
56 |         config: &HybridConfig,
   |         ^^^^^^ help: if this is intentional, prefix it with an underscore: `_config`

error[E0599]: no variant or associated item named `Config` found for enum `TdbError` in the current scope
   --> src/hybrid/mod.rs:399:38
    |
399 |                     .ok_or(TdbError::Config("SSD storage not configured".into()))?;
    |                                      ^^^^^^ variant or associated item not found in `TdbError`
    |
   ::: src/error.rs:10:1
    |
 10 | pub enum TdbError {
    | ----------------- variant or associated item `Config` not found for this enum

error[E0599]: no variant or associated item named `Config` found for enum `TdbError` in the current scope
   --> src/hybrid/mod.rs:407:38
    |
407 |                     .ok_or(TdbError::Config("HDD storage not configured".into()))?;
    |                                      ^^^^^^ variant or associated item not found in `TdbError`
    |
   ::: src/error.rs:10:1
    |
 10 | pub enum TdbError {
    | ----------------- variant or associated item `Config` not found for this enum

error[E0599]: no variant or associated item named `Config` found for enum `TdbError` in the current scope
   --> src/hybrid/mod.rs:423:42
    |
423 |                         .ok_or(TdbError::Config("SSD storage not configured".into()))?;
    |                                          ^^^^^^ variant or associated item not found in `TdbError`
    |
   ::: src/error.rs:10:1
    |
 10 | pub enum TdbError {
    | ----------------- variant or associated item `Config` not found for this enum

error[E0599]: no method named `close` found for struct `Arc<Database>` in the current scope
  --> src/node_bindings.rs:34:20
   |
34 |         self.inner.close()
   |                    ^^^^^
   |
help: there is a method `clone` with a similar name
   |
34 -         self.inner.close()
34 +         self.inner.clone()
   |

error[E0609]: no field `op` on type `KeyValue`
   --> src/lib.rs:235:25
    |
235 |             match entry.op {
    |                         ^^ unknown field
    |
    = note: available fields are: `key`, `value`, `timestamp`, `sequence`, `deleted`

error[E0277]: the trait bound `sstable::IndexEntry: serde::Deserialize<'de>` is not satisfied
   --> src/storage/sstable.rs:156:40
    |
156 |         let entries: Vec<IndexEntry> = bincode::deserialize(data)?;
    |                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^ unsatisfied trait bound
    |
help: the trait `Deserialize<'_>` is not implemented for `sstable::IndexEntry`
   --> src/storage/sstable.rs:23:1
    |
 23 | struct IndexEntry {
    | ^^^^^^^^^^^^^^^^^
    = note: for local types consider adding `#[derive(serde::Deserialize)]` to your `sstable::IndexEntry` type
    = note: for types from other crates check whether the crate offers a `serde` feature flag
    = help: the following other types implement trait `Deserialize<'de>`:
              &'a Path
              &'a [u8]
              &'a str
              ()
              (T,)
              (T0, T1)
              (T0, T1, T2)
              (T0, T1, T2, T3)
            and 183 others
    = note: required for `Vec<sstable::IndexEntry>` to implement `Deserialize<'_>`
note: required by a bound in `bincode::deserialize`
   --> /Users/AbiolaOgunsakin1/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/bincode-1.3.3/src/lib.rs:179:8
    |
177 | pub fn deserialize<'a, T>(bytes: &'a [u8]) -> Result<T>
    |        ----------- required by a bound in this function
178 | where
179 |     T: serde::de::Deserialize<'a>,
    |        ^^^^^^^^^^^^^^^^^^^^^^^^^^ required by this bound in `deserialize`
    = note: the full name for the type has been written to '/Users/AbiolaOgunsakin1/tdb+ fork/tdb-fork/rust-core/target/debug/deps/tdb_core-03ec04e8da9596ee.long-type-5403860002934157142.txt'
    = note: consider using `--verbose` to print the full type name to the console

error[E0277]: the trait bound `sstable::IndexEntry: serde::Serialize` is not satisfied
   --> src/storage/sstable.rs:271:45
    |
271 |         let index_data = bincode::serialize(&self.index)?;
    |                          ------------------ ^^^^^^^^^^^ unsatisfied trait bound
    |                          |
    |                          required by a bound introduced by this call
    |
help: the trait `Serialize` is not implemented for `sstable::IndexEntry`
   --> src/storage/sstable.rs:23:1
    |
 23 | struct IndexEntry {
    | ^^^^^^^^^^^^^^^^^
    = note: for local types consider adding `#[derive(serde::Serialize)]` to your `sstable::IndexEntry` type
    = note: for types from other crates check whether the crate offers a `serde` feature flag
    = help: the following other types implement trait `Serialize`:
              &'a T
              &'a mut T
              ()
              (T,)
              (T0, T1)
              (T0, T1, T2)
              (T0, T1, T2, T3)
              (T0, T1, T2, T3, T4)
            and 164 others
    = note: required for `Vec<sstable::IndexEntry>` to implement `Serialize`
note: required by a bound in `bincode::serialize`
   --> /Users/AbiolaOgunsakin1/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/bincode-1.3.3/src/lib.rs:108:8
    |
106 | pub fn serialize<T: ?Sized>(value: &T) -> Result<Vec<u8>>
    |        --------- required by a bound in this function
107 | where
108 |     T: serde::Serialize,
    |        ^^^^^^^^^^^^^^^^ required by this bound in `serialize`

error[E0689]: can't call method `wrapping_mul` on ambiguous numeric type `{integer}`
   --> src/storage/sstable.rs:303:46
    |
300 |         for i in 0..7 {
    |             - you must specify a type for this binding, like `i32`
...
303 |             let bit_pos = (h1.wrapping_add(i.wrapping_mul(h2))) % num_bits;
    |                                              ^^^^^^^^^^^^

error[E0599]: no variant or associated item named `Memory` found for enum `TdbError` in the current scope
   --> src/hybrid/tier.rs:110:36
    |
110 |             .map_err(|e| TdbError::Memory(format!("Invalid layout: {}", e)))?;
    |                                    ^^^^^^ variant or associated item not found in `TdbError`
    |
   ::: src/error.rs:10:1
    |
 10 | pub enum TdbError {
    | ----------------- variant or associated item `Memory` not found for this enum

error[E0599]: no variant or associated item named `Memory` found for enum `TdbError` in the current scope
   --> src/hybrid/tier.rs:115:38
    |
115 |                 return Err(TdbError::Memory("Failed to allocate memory".into()));
    |                                      ^^^^^^ variant or associated item not found in `TdbError`
    |
   ::: src/error.rs:10:1
    |
 10 | pub enum TdbError {
    | ----------------- variant or associated item `Memory` not found for this enum

error[E0599]: no variant or associated item named `Memory` found for enum `TdbError` in the current scope
   --> src/hybrid/tier.rs:145:34
    |
145 |             return Err(TdbError::Memory("RAM store full".into()));
    |                                  ^^^^^^ variant or associated item not found in `TdbError`
    |
   ::: src/error.rs:10:1
    |
 10 | pub enum TdbError {
    | ----------------- variant or associated item `Memory` not found for this enum

error[E0277]: the trait bound `AtomicU64: Clone` is not satisfied
   --> src/hybrid/mod.rs:173:5
    |
161 | #[derive(Debug, Clone)]
    |                 ----- in this derive macro expansion
...
173 |     pub access_count: AtomicU64,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `Clone` is not implemented for `AtomicU64`

error[E0277]: the trait bound `AtomicU64: Clone` is not satisfied
   --> src/hybrid/mod.rs:176:5
    |
161 | #[derive(Debug, Clone)]
    |                 ----- in this derive macro expansion
...
176 |     pub last_access: AtomicU64,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `Clone` is not implemented for `AtomicU64`

error[E0599]: no variant or associated item named `NotFound` found for enum `TdbError` in the current scope
   --> src/columnar/mod.rs:353:30
    |
353 |             .ok_or(TdbError::NotFound(format!("Column {}", col_name)))?;
    |                              ^^^^^^^^ variant or associated item not found in `TdbError`
    |
   ::: src/error.rs:10:1
    |
 10 | pub enum TdbError {
    | ----------------- variant or associated item `NotFound` not found for this enum

error[E0599]: no variant or associated item named `InvalidArgument` found for enum `TdbError` in the current scope
   --> src/columnar/mod.rs:356:30
    |
356 |             .ok_or(TdbError::InvalidArgument("Column is not f64".into()))?;
    |                              ^^^^^^^^^^^^^^^ variant or associated item not found in `TdbError`
    |
   ::: src/error.rs:10:1
    |
 10 | pub enum TdbError {
    | ----------------- variant or associated item `InvalidArgument` not found for this enum

error[E0599]: no variant or associated item named `NotFound` found for enum `TdbError` in the current scope
   --> src/columnar/mod.rs:364:30
    |
364 |             .ok_or(TdbError::NotFound(format!("Column {}", col_name)))?;
    |                              ^^^^^^^^ variant or associated item not found in `TdbError`
    |
   ::: src/error.rs:10:1
    |
 10 | pub enum TdbError {
    | ----------------- variant or associated item `NotFound` not found for this enum

error[E0599]: no variant or associated item named `InvalidArgument` found for enum `TdbError` in the current scope
   --> src/columnar/mod.rs:375:32
    |
375 |             _ => Err(TdbError::InvalidArgument("Column is not numeric".into())),
    |                                ^^^^^^^^^^^^^^^ variant or associated item not found in `TdbError`
    |
   ::: src/error.rs:10:1
    |
 10 | pub enum TdbError {
    | ----------------- variant or associated item `InvalidArgument` not found for this enum

error[E0599]: no variant or associated item named `NotFound` found for enum `TdbError` in the current scope
   --> src/columnar/mod.rs:382:30
    |
382 |             .ok_or(TdbError::NotFound(format!("Column {}", col_name)))?;
    |                              ^^^^^^^^ variant or associated item not found in `TdbError`
    |
   ::: src/error.rs:10:1
    |
 10 | pub enum TdbError {
    | ----------------- variant or associated item `NotFound` not found for this enum

error[E0599]: no variant or associated item named `InvalidArgument` found for enum `TdbError` in the current scope
   --> src/columnar/mod.rs:393:32
    |
393 |             _ => Err(TdbError::InvalidArgument("Column is not numeric".into())),
    |                                ^^^^^^^^^^^^^^^ variant or associated item not found in `TdbError`
    |
   ::: src/error.rs:10:1
    |
 10 | pub enum TdbError {
    | ----------------- variant or associated item `InvalidArgument` not found for this enum

error[E0599]: no variant or associated item named `NotFound` found for enum `TdbError` in the current scope
   --> src/columnar/mod.rs:400:30
    |
400 |             .ok_or(TdbError::NotFound(format!("Column {}", col_name)))?;
    |                              ^^^^^^^^ variant or associated item not found in `TdbError`
    |
   ::: src/error.rs:10:1
    |
 10 | pub enum TdbError {
    | ----------------- variant or associated item `NotFound` not found for this enum

error[E0599]: no variant or associated item named `InvalidArgument` found for enum `TdbError` in the current scope
   --> src/columnar/mod.rs:403:30
    |
403 |             .ok_or(TdbError::InvalidArgument("Column is not f64".into()))?;
    |                              ^^^^^^^^^^^^^^^ variant or associated item not found in `TdbError`
    |
   ::: src/error.rs:10:1
    |
 10 | pub enum TdbError {
    | ----------------- variant or associated item `InvalidArgument` not found for this enum

error[E0599]: no variant or associated item named `Memory` found for enum `TdbError` in the current scope
   --> src/io/uring.rs:287:30
    |
287 |             .ok_or(TdbError::Memory("No free buffers".into()))
    |                              ^^^^^^ variant or associated item not found in `TdbError`
    |
   ::: src/error.rs:10:1
    |
 10 | pub enum TdbError {
    | ----------------- variant or associated item `Memory` not found for this enum

error[E0599]: no method named `create_collection` found for struct `Arc<Database>` in the current scope
   --> src/ffi/mod.rs:174:30
    |
174 |     match rt.block_on(engine.create_collection(name_str)) {
    |                              ^^^^^^^^^^^^^^^^^
    |
help: there is a method `collection` with a similar name
    |
174 -     match rt.block_on(engine.create_collection(name_str)) {
174 +     match rt.block_on(engine.collection(name_str)) {
    |

error[E0599]: no method named `drop_collection` found for struct `Arc<Database>` in the current scope
   --> src/ffi/mod.rs:201:30
    |
201 |     match rt.block_on(engine.drop_collection(name_str)) {
    |                              ^^^^^^^^^^^^^^^
    |
help: there is a method `collection` with a similar name
    |
201 -     match rt.block_on(engine.drop_collection(name_str)) {
201 +     match rt.block_on(engine.collection(name_str)) {
    |

error[E0308]: mismatched types
   --> src/ffi/mod.rs:248:53
    |
248 |     match rt.block_on(engine.insert(collection_str, doc)) {
    |                              ------                 ^^^ expected `Document`, found `Value`
    |                              |
    |                              arguments to this method are incorrect
    |
note: method defined here
   --> src/lib.rs:159:18
    |
159 |     pub async fn insert(&self, collection: &str, mut doc: Document) -> Result<DocumentId> {
    |                  ^^^^^^                          -----------------

error[E0308]: mismatched types
   --> src/ffi/mod.rs:331:50
    |
331 |     match rt.block_on(engine.get(collection_str, id_str)) {
    |                              ---                 ^^^^^^ expected `&String`, found `&str`
    |                              |
    |                              arguments to this method are incorrect
    |
    = note: expected reference `&std::string::String`
               found reference `&str`
note: method defined here
   --> src/lib.rs:176:18
    |
176 |     pub async fn get(&self, collection: &str, id: &DocumentId) -> Result<Option<Document>> {
    |                  ^^^                          ---------------

error[E0308]: arguments to this method are incorrect
   --> src/ffi/mod.rs:382:30
    |
382 |     match rt.block_on(engine.update(collection_str, id_str, updates)) {
    |                              ^^^^^^                 ------  ------- expected `Document`, found `Value`
    |                                                     |
    |                                                     expected `&String`, found `&str`
    |
    = note: expected reference `&std::string::String`
               found reference `&str`
note: method defined here
   --> src/lib.rs:184:18
    |
184 |     pub async fn update(&self, collection: &str, id: &DocumentId, mut doc: Document) -> Result<bool> {
    |                  ^^^^^^                          ---------------  -----------------

error[E0308]: mismatched types
   --> src/ffi/mod.rs:415:53
    |
415 |     match rt.block_on(engine.delete(collection_str, id_str)) {
    |                              ------                 ^^^^^^ expected `&String`, found `&str`
    |                              |
    |                              arguments to this method are incorrect
    |
    = note: expected reference `&std::string::String`
               found reference `&str`
note: method defined here
   --> src/lib.rs:198:18
    |
198 |     pub async fn delete(&self, collection: &str, id: &DocumentId) -> Result<bool> {
    |                  ^^^^^^                          ---------------

error[E0599]: no method named `query` found for struct `Arc<Database>` in the current scope
   --> src/ffi/mod.rs:453:30
    |
453 |     match rt.block_on(engine.query(collection_str, query_str)) {
    |                              ^^^^^ method not found in `Arc<Database>`

error[E0308]: mismatched types
   --> src/ffi/mod.rs:502:59
    |
502 |     match rt.block_on(engine.batch_insert(collection_str, docs)) {
    |                              ------------                 ^^^^ expected `Vec<Document>`, found `Vec<Value>`
    |                              |
    |                              arguments to this method are incorrect
    |
    = note: expected struct `Vec<Document>`
               found struct `Vec<serde_json::Value>`
note: method defined here
   --> src/lib.rs:215:18
    |
215 |     pub async fn batch_insert(&self, collection: &str, docs: Vec<Document>) -> Result<Vec<DocumentId>> {
    |                  ^^^^^^^^^^^^                          -------------------

error[E0308]: mismatched types
   --> src/ffi/mod.rs:505:30
    |
505 |                 *count_out = count;
    |                 ----------   ^^^^^ expected `usize`, found `Vec<String>`
    |                 |
    |                 expected due to the type of this binding
    |
    = note: expected type `usize`
             found struct `Vec<std::string::String>`

error[E0277]: `DatabaseStats` is not a future
   --> src/ffi/mod.rs:572:29
    |
572 |     let stats = rt.block_on(engine.stats());
    |                    -------- ^^^^^^^^^^^^^^ `DatabaseStats` is not a future
    |                    |
    |                    required by a bound introduced by this call
    |
help: the trait `std::future::Future` is not implemented for `DatabaseStats`
   --> src/lib.rs:278:1
    |
278 | pub struct DatabaseStats {
    | ^^^^^^^^^^^^^^^^^^^^^^^^
note: required by a bound in `tokio::runtime::Runtime::block_on`
   --> /Users/AbiolaOgunsakin1/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/tokio-1.48.0/src/runtime/runtime.rs:337:24
    |
337 |     pub fn block_on<F: Future>(&self, future: F) -> F::Output {
    |                        ^^^^^^ required by this bound in `Runtime::block_on`

error[E0599]: no variant or associated item named `NotFound` found for enum `TdbError` in the current scope
  --> src/scripting/procedures.rs:28:52
   |
28 |             .ok_or_else(|| crate::error::TdbError::NotFound(format!("Procedure '{}' not found", name)))?;
   |                                                    ^^^^^^^^ variant or associated item not found in `TdbError`
   |
  ::: src/error.rs:10:1
   |
10 | pub enum TdbError {
   | ----------------- variant or associated item `NotFound` not found for this enum

warning: unused import: `Write`
 --> src/storage/manifest.rs:5:46
  |
5 | use std::io::{BufRead, BufReader, BufWriter, Write};
  |                                              ^^^^^

warning: unused variable: `data_dir`
   --> src/storage/engine.rs:403:22
    |
403 |     fn load_sstables(data_dir: &PathBuf, manifest: &Manifest) -> Result<Vec<Vec<Arc<SSTable>>>> {
    |                      ^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_data_dir`

warning: unused variable: `bloom_bits_per_key`
   --> src/storage/sstable.rs:223:55
    |
223 |     pub fn new(path: &Path, compression: Compression, bloom_bits_per_key: usize) -> Result<Self> {
    |                                                       ^^^^^^^^^^^^^^^^^^
    |
help: if this is intentional, prefix it with an underscore
    |
223 |     pub fn new(path: &Path, compression: Compression, _bloom_bits_per_key: usize) -> Result<Self> {
    |                                                       +
help: you might have meant to pattern match on the similarly named constant `BLOCK_SIZE`
    |
223 -     pub fn new(path: &Path, compression: Compression, bloom_bits_per_key: usize) -> Result<Self> {
223 +     pub fn new(path: &Path, compression: Compression, memory::arena::BLOCK_SIZE: usize) -> Result<Self> {
    |

error[E0515]: cannot return value referencing function parameter `entry`
  --> src/memory/memtable.rs:75:40
   |
75 |         self.data.get(key).map(|entry| entry.value())
   |                                        -----^^^^^^^^
   |                                        |
   |                                        returns a value referencing data owned by the current function
   |                                        `entry` is borrowed here

warning: unused variable: `numa_node`
  --> src/hybrid/tier.rs:56:51
   |
56 |     pub fn new(capacity: usize, huge_pages: bool, numa_node: i32) -> TdbResult<Self> {
   |                                                   ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_numa_node`

warning: value assigned to `pos` is never read
  --> src/columnar/compression.rs:67:13
   |
67 |     let mut pos = 0;
   |             ^^^
   |
   = help: maybe it is overwritten before being read?
   = note: `#[warn(unused_assignments)]` (part of `#[warn(unused)]`) on by default

warning: value assigned to `pos` is never read
   --> src/columnar/compression.rs:132:13
    |
132 |     let mut pos = 0;
    |             ^^^
    |
    = help: maybe it is overwritten before being read?

warning: value assigned to `pos` is never read
   --> src/columnar/compression.rs:137:5
    |
137 |     pos = 8;
    |     ^^^
    |
    = help: maybe it is overwritten before being read?

warning: value assigned to `pos` is never read
   --> src/columnar/compression.rs:285:17
    |
285 |         let mut pos = 0;
    |                 ^^^
    |
    = help: maybe it is overwritten before being read?

warning: unused variable: `bucket_size`
   --> src/columnar/timeseries.rs:280:13
    |
280 |         let bucket_size = granularity.nanos();
    |             ^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_bucket_size`

warning: unused variable: `len`
   --> src/io/uring.rs:184:9
    |
184 |         len: usize,
    |         ^^^
    |
help: if this is intentional, prefix it with an underscore
    |
184 |         _len: usize,
    |         +
help: you might have meant to pattern match on the similarly named constant `BLOCK_SIZE`
    |
184 -         len: usize,
184 +         memory::arena::BLOCK_SIZE: usize,
    |

warning: unused variable: `script_name`
  --> src/scripting/triggers.rs:42:22
   |
42 |                  for script_name in scripts.iter() {
   |                      ^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_script_name`

warning: unused variable: `doc`
  --> src/scripting/triggers.rs:39:67
   |
39 |     pub fn on_event(&self, collection: &str, event: TriggerEvent, doc: &mut Document) -> Result<()> {
   |                                                                   ^^^ help: if this is intentional, prefix it with an underscore: `_doc`

warning: variable does not need to be mutable
  --> src/scripting/mod.rs:14:13
   |
14 |         let mut engine = Engine::new();
   |             ----^^^^^^
   |             |
   |             help: remove this `mut`
   |
   = note: `#[warn(unused_mut)]` (part of `#[warn(unused)]`) on by default

Some errors have detailed explanations: E0107, E0204, E0277, E0308, E0433, E0515, E0599, E0603, E0609...
For more information about an error, try `rustc --explain E0107`.
warning: `tdb-core` (lib) generated 49 warnings
error: could not compile `tdb-core` (lib) due to 41 previous errors; 49 warnings emitted
